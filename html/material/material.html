<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <title>素材</title>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
      <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
      <link rel="stylesheet" type="text/css" href="../../css/aui-slide.css" />
      <link rel="stylesheet" type="text/css" href="../../css/iconfont.css"/>
      <link rel="stylesheet" type="text/css" href="../../css/public.css"/>
      <style>
          html,body{
            height: 100%;
            background-color: #eee;
          }
        /*banner图*/
          .mui-slider-indicator .mui-indicator{
            width: 3px;
            height: 3px;
            margin: 1px;
          }
          .mui-table-view-cell.mui-collapse .mui-collapse-content{
            display: block;
          }
          /**/
          .shoping {
            display: flex;
            justify-content: space-around;
            line-height: 50px;
            background-color: #fff;
          }
          #shopings{
            z-index: 1;
            visibility: hidden;
            position: fixed;
            top: 0px;
            left: 0;
            width: 100%;
            border-bottom: 1px solid #eee;
          }
          /**/
          .mui-table-view{
            margin-top: 10px;
          }
          .mui-media-object{
            border-radius: 50%;
          }
          .share{
            position: absolute;
            top: 50%;
            right: 3vw;
            height: 21px;
            -webkit-transform: translateY(-50%);
            transform: translateY(-50%);
            border-radius: 30px;
            line-height: 16px;
            font-size: 12px;
            padding: 3px 2vw;
          }
          .buy{
            position: absolute;
            top: 50%;
            right: 16vw;
            -webkit-transform: translateY(-50%);
            transform: translateY(-50%);
            border-radius: 30px;
            line-height: 1;
            font-size: 12px;
            padding: 3px 2vw;
          }
          .specialty-box{
            width: 100%;
            border-top: 1px solid #ccc;
          }
          .specialty-boxi{
            width: 100%;
            box-sizing: border-box;
            padding: 5px 3vw;
          }
          .specialty-img li{
            float: left;
            width: 30vw;
            height: 30vw;
            margin: 5px 2vw 5px 0;
          }
          .specialty-img li:nth-child(3n){
            margin-right: 0;
          }
          .materials{
            display: none;
          }
          .disbl{
            display: block;
          }
          /**/
          .password{
            width: 70vw;
            height: 66px;
            padding: 5px 2vw;
            box-sizing: border-box;
            border: 1px dashed #d81e06;
            font-size: 12px;
            line-height: 18px;
          }
          .copy{
            width: 20vw;
            height: 66px;
            color: #fff;
            background: linear-gradient(to bottom right,#666,#000);
            border-radius:3px;
            text-align: center;
            padding: 10px 5vw;
          }
          /*分享*/
          .aui-btn-info.aui-active, .aui-btn-info:active,.aui-btn:active{
            color: #fff;
            background-color:#d81e06!important;
          }
          .aui-popup-bottom{
            left: 0;
            bottom: 0;
            width: 100vw;
            margin: 0;
          }
          .aui-popup-arrow{
            display: none;
          }
          #shareout{
            display: none;
          }
          .share-box{
            width: 20vw;
            padding: 7px 0;
          }
          .share-box .share-box-img{
            width: 55%;
            margin: 0 auto 5px;
          }
      </style>
  </head>
  <body>
    <div id="header"></div>
    <div id="shopings" class="shoping">
      <div class="shops cored" onclick="shops(0,'hhzc')">好货专场</div>
      <div class="shops" onclick="shops(1),'bbsc'">必备素材</div>
      <div class="shops" onclick="shops(2),'jxdp'">商品</div>
      <div class="shops" onclick="shops(3),'hwlj'">精选单品</div>
    </div>
    <!-- 轮播图 -->
    <div id="aui-slide" class="bgcr">
      <div id="slides" class="aui-slide-wrap boradius" >
      </div>
      <div class="aui-slide-page-wrap"><!--分页容器--></div>
    </div>
    <div id="shoping" class="shoping">
      <div class="shop cored" onclick="shop(0,'hhzc')">好货专场</div>
      <div class="shop" onclick="shop(1,'bbsc')">必备素材</div>
      <div class="shop" onclick="shop(2,'jxdp')">商品</div>
      <div class="shop" onclick="shop(3,'hwlj')">精选单品</div>
    </div>
    <!-- 好货专场 -->
    <div id="specialty" class="materials disbl">
      <!-- <div class="mui-table-view">
        <div class="mui-table-view-cell mui-media">
            <img class="mui-media-object mui-pull-left" src="../../image/a3.png">
            <div class="mui-media-body">
              小编推荐
              <p class='mui-ellipsis'>2019-6-19</p>
            </div>
            <span class="bgcr share aui-btn" onclick="shareBtn()"><i class="iconfont fs12">&#xe61f;</i>4058</span>
        </div>
        <div class="specialty-box">
          <div class="specialty-boxi">
            <div class="specialty-text">
              <p class="cored bold fs16">榜单榜</p>
              <p class="fs14">每天上班挤公交车挤地铁</br>都不能穿美丽的裙子</br>看看这些休闲的修身的裤装</br>满足你所有的需求</p>
            </div>
            <ul class="specialty-img clearfix">
              <li onclick="openitem()"><img src="../../image/la1.png"></li>
              <li onclick="openitem()"><img src="../../image/la2.png"></li>
              <li onclick="openitem()"><img src="../../image/la3.png"></li>
              <li onclick="openitem()"><img src="../../image/la3.png"></li>
              <li onclick="openitem()"><img src="../../image/la2.png"></li>
              <li onclick="openitem()"><img src="../../image/la1.png"></li>
              <li onclick="openitem()"><img src="../../image/la1.png"></li>
              <li onclick="openitem()"><img src="../../image/la2.png"></li>
              <li onclick="openitem()"><img src="../../image/la3.png"></li>
            </ul>
          </div>
        </div>
      </div> -->
    </div>
    <!-- 必备素材 -->
    <div id="necessary" class="materials">
      <!-- <div class="mui-table-view">
        <div class="mui-table-view-cell mui-media">
            <img class="mui-media-object mui-pull-left" src="../../image/a3.png">
            <div class="mui-media-body">
              小编推荐
              <p class='mui-ellipsis'>2019-6-19 18:52:00</p>
            </div>
            <span class="bgcr share"><i class="iconfont fs12">&#xe61f;</i>一键分享</span>
        </div>
        <div class="specialty-box">
          <div class="specialty-boxi">
            <div class="specialty-text">
              <p>每天上班挤公交车挤地铁都不能穿美丽的裙子看看这些休闲的修身的裤装满足你所有的需求</p>
            </div>
            <ul class="specialty-img clearfix">
                <li onclick="openitem()"><img src="../../image/a3.png"></li>
            </ul>
          </div>
        </div>
      </div> -->
    </div>
    <!-- 商品 -->
    <div id="commodity" class="materials">

    </div>
    <!-- 精选单品 -->
    <div id="selected" class="materials">
      <!-- <div class="mui-table-view">
        <div class="mui-table-view-cell mui-media">
          <a href="javascript:;">
            <img class="mui-media-object mui-pull-left" src="../../image/a3.png">
            <div class="mui-media-body">
              小编推荐
              <p class='mui-ellipsis'>2019-6-19</p>
            </div>
            <span class="bgcr buy">领券购买</span>
            <span class="bgcr share"><i class="iconfont fs12">&#xe61f;</i>280</span>
          </a>
        </div>
        <div class="specialty-box">
          <div class="specialty-boxi">
            <div class="specialty-text">
              <p class="cored bold">自购赚￥1.17</p>
              <p>每天上班挤公交车挤地铁</br>都不能穿美丽的裙子</br>看看这些休闲的修身的裤装</br>满足你所有的需求</p>
            </div>
            <ul class="specialty-img clearfix">
              <li onclick="openitem()"><img src="../../image/la1.png"></li>
              <li onclick="openitem()"><img src="../../image/la2.png"></li>
              <li onclick="openitem()"><img src="../../image/la3.png"></li>
              <li onclick="openitem()"><img src="../../image/la3.png"></li>
              <li onclick="openitem()"><img src="../../image/la2.png"></li>
              <li onclick="openitem()"><img src="../../image/la1.png"></li>
            </ul>
            <div class="clearfix mt10b5">
              <div class="password fl">汽车纳米水晶镀膜剂全车镀金车漆防水液体喷雾正品套装用品黑科技|专享口令$淘口令$</div>
              <div class="copy fr">复制评论</div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
    <!--  -->
    <div id="shareout">
      <div onclick="hideShare()" class="aui-mask aui-mask-in"></div>
      <div class="aui-popup aui-popup-bottom aui-popup-in">
        <div class="aui-popup-arrow"></div>
        <div class="aui-popup-content text-center">
          <ul class="aui-list-share aui-list-noborder just-space">
            <li onclick="share()" class="share-box">
              <div class="share-box-img">
                <img src="../../image/a1.png">
              </div>
              <div class="aui-list-item-inner">微信</div>
            </li>
            <li class="share-box">
              <div class="share-box-img">
                <img src="../../image/a2.png">
              </div>
              <div class="aui-list-item-inner">朋友圈</div>
            </li>
            <li class="share-box">
              <div class="share-box-img">
                <img src="../../image/a3.png">
              </div>
              <div class="aui-list-item-inner">qq好友</div>
            </li>
            <li class="share-box">
              <div class="share-box-img">
                <img src="../../image/a4.png">
              </div>
              <div class="aui-list-item-inner">qq空间</div>
            </li>
            <li class="share-box">
              <div class="share-box-img">
                <img src="../../image/a5.png">
              </div>
              <div class="aui-list-item-inner">新浪微博</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <!-- <script type="text/javascript" src="../../script/zepto.js"></script> -->
  <script type="text/javascript" src="../../script/aui-slide.js"></script>
  <script type="text/javascript" src="../../script/aui-popup-new.js" ></script>
  <script type="text/javascript" src="../../script/aui-scroll.js" ></script>
  <script type="text/javascript" src="../../script/md5.js"></script>
  <script type="text/javascript" src="../../script/ajax.js"></script>
  <script type="text/javascript">
      var wx;
      var shopH;
      var header;
      var headerPos;
      var slides = document.getElementById('slides');
      var page = 1;
      var pagesize = 8;
      var state = true;
      var specialty = document.getElementById('specialty');
      var necessary = document.getElementById('necessary');
      var commodity = document.getElementById('commodity');
      var selected = document.getElementById('selected');
      var img_box = [];
      apiready = function(){
        header = $api.byId('header');
        // $api.fixStatusBar(header);
        headerPos = $api.offset(header);
        wx = api.require('wx');
        //监听接收
        var slider = $api.byId('aui-slide');
        var shopings = $api.byId('shopings');
        $api.fixStatusBar(shopings);
        var sliderPos = $api.offset(slider);
        var shopingPos = $api.offset(shoping);
        shopH = sliderPos.h + shopingPos.h + headerPos.h;
        getBanner()
        getData()
        api.addEventListener({
            name:'scrolltobottom',
            extra:{
                threshold: -1            //设置距离底部多少距离时触发，默认值为0，数字类型
            }
        }, function(ret, err){
          loading()
        });
        //下拉刷新
        api.setRefreshHeaderInfo({
              visible: true,
              loadingImg: '../../image/loading_more.gif',
              bgColor: '#ccc',
              textColor: '#fff',
              textDown: '下拉刷新...',
              textUp: '松开刷新...',
              showTime: true //显示更新时间
          }, function(ret, err) {
            // api.refreshHeaderLoadDone()
            setTimeout(function(){
              page = 1;
              state = true;
              window.location.reload()
              // getData()
              api.refreshHeaderLoadDone();
            },1000)
              // 在这里从服务器加载数据，加载完成后调用api.refreshHeaderLoadDone()方法恢复组件到默认状态
        });
      };
      //监听滑动
      var scroll = new auiScroll({
          listen:true,
          distance:200 //判断到达底部的距离，isToBottom为true
      },function(ret){
        var scrollTop = ret.scrollTop;
        if (scrollTop>240) {
        // if (scrollTop>shopH) {
          // header.style.background = "#fff";
          shopings.style.visibility = "inherit";
        }else {
          // header.style.background = "#transparent";
          shopings.style.visibility = "hidden";
        }
      });
      // 切换
      function shop(index,type) {
        getData(type)
        var shop = document.getElementsByClassName('shop');
        var shops = document.getElementsByClassName('shops');
        var len = shop.length
        var i = 0;
        var curLi = shop[index];
        for (i; i < len; i++) {
            var thisLi = shop[i];
            var thisLis = shops[i];
            if (thisLi === curLi) {
                $api.addCls(thisLi, 'cored');
                $api.addCls(thisLis, 'cored');
                continue;
            } else {
                if ($api.hasCls(thisLi, 'cored')) {
                    $api.removeCls(thisLi, 'cored');
                    $api.removeCls(thisLis, 'cored');
                }
            }
        }
        //打开子页面
        var materials = document.getElementsByClassName('materials')
        var lens = materials.length
        // console.log(lens);
        var j = 0;
        var curLis = materials[index];
        for (j; j < len; j++) {
            var thisLi = materials[j];
            if (thisLi === curLis) {
                $api.addCls(thisLi, 'disbl');
                continue;
            } else {
                if ($api.hasCls(thisLi, 'disbl')) {
                    $api.removeCls(thisLi, 'disbl');
                }
            }
        }
      }
      function shops(index,type) {
        getData(type)
        var shop = document.getElementsByClassName('shop');
        var shops = document.getElementsByClassName('shops');
        var len = shops.length
        var i = 0;
        var curLi = shops[index];
        for (i; i < len; i++) {
            var thisLi = shops[i];
            var thisLis = shop[i];
            if (thisLi === curLi) {
                $api.addCls(thisLi, 'cored');
                $api.addCls(thisLis, 'cored');
                continue;
            } else {
                if ($api.hasCls(thisLi, 'cored')) {
                    $api.removeCls(thisLi, 'cored');
                    $api.removeCls(thisLis, 'cored');
                }
            }
        }
        //打开子页面
        var materials = document.getElementsByClassName('materials')
        var lens = materials.length
        // console.log(lens);
        var j = 0;
        var curLis = materials[index];
        for (j; j < len; j++) {
            var thisLi = materials[j];
            if (thisLi === curLis) {
                $api.addCls(thisLi, 'disbl');
                continue;
            } else {
                if ($api.hasCls(thisLi, 'disbl')) {
                    $api.removeCls(thisLi, 'disbl');
                }
            }
        }
      }
      //分享
        var shareOut = document.getElementById('shareout');
        //打开分享按钮
        function shareBtn() {
          shareOut.style.display = "block";
        }
        //隐藏分享按钮
        function hideShare() {
          var no
          shareOut.style.display = "none"
        }
        //分享
        function share() {
          wx.shareText({
            apiKey: '',
            scene: 'timeline',
            text: '我分享的文本'
        }, function(ret, err) {
            if (ret.status) {
                alert('分享成功');
            } else {
                alert(err.code);
            }
        });
        }
       // 打开物品
       function openitem(type,item_id,i) {
        //  console.log(JSON.stringify(img_box));
        //  console.log(type);
          if (type === "img") {
            var photoBrowser = api.require('photoBrowser');
            photoBrowser.open({
                images: img_box[i],
                bgColor: '#000'
            }, function(ret, err) {
                if (ret) {
                    api.sendEvent({
                        name: 'PhotoState',
                        extra: {
                            state: '1',
                        }
                    });
                    //点击关闭图片
                    if (ret.eventType == 'click') {
                      closePhoto()
                    }
                }
            });
          } else if (type === "item") {
             api.openWin({
                 name: 'item',
                 url: '../home/item.html',
                 pageParam: {
                     item_id: item_id
                 }
             });
          }
       }
       function openitems() {
        //  api.openWin({
        //      name: 'item',
        //      url: '../home/item.html',
        //      pageParam: {
        //          item_id: item_id
        //      }
        //  });
       }
       //banner图获取
       var getBanner = function () {
         axios({
           url: '/api/rmaterial/home',
           data:{
           }
         },function(ret){
            console.log(JSON.stringify(ret));
            var html = "";
            for (var i = 0; i < ret.data.banner.length; i++) {
              html += '<div class="aui-slide-node bg-dark"><img src="' + ret.data.banner[i].image + '" /></div>'
            }
            slides.innerHTML = html;
            // 轮播图
            var slide = new auiSlide({
               container:document.getElementById("aui-slide"),
               // "width":300,
               "height":240,
               "speed":300,
               "pageShow":true,
               "pageStyle":'dot',
               "autoPlay":3000,
               "loop":true,
               'dotPosition':'center'
           })
         })
       }

       //数据请求
       var getData = function(type) {
         if (type === undefined) {
           type = ""
         }
         axios({
           url: '/api/rmaterial/getlist',
           data:{
             type:type,
             page:page,
             pagesize:pagesize
           }
         },function(ret){
            console.log(JSON.stringify(ret));
            var html = "";
            if (type === "hhzc" || type === "") {
              if (ret.data.length < pagesize) {
								state = false
							}
              for (var i = 0; i < ret.data.length; i++) {
                img_box[i] = [];
                var htmls = "";
                for (var j = 0; j < ret.data[i].img_list.length; j++) {
                  htmls += `<li onclick="openitem('${ret.data[i].img_list[j].type}',${ret.data[i].img_list[j].param},${i})"><img src="${ret.data[i].img_list[j].img_url}"></li>`
                  if (ret.data[i].img_list[j].type === "img") {
                    img_box[i].push(ret.data[i].img_list[j].img_url)
                  }
                }
                html += `<div class="mui-table-view">
                  <div class="mui-table-view-cell mui-media">
                      <img class="mui-media-object mui-pull-left" src="${ret.data[i].header_img}">
                      <div class="mui-media-body">
                        ${ret.data[i].nickname}
                        <p class='mui-ellipsis'>${ret.data[i].createtime}</p>
                      </div>
                      <span class="bgcr share aui-btn" onclick="shareBtn(${ret.data[i].id})"><i class="iconfont fs12">&#xe61f;</i>${ret.data[i].share_num}</span>
                  </div>
                  <div class="specialty-box">
                    <div class="specialty-boxi">
                      <div class="specialty-text">
                        <p class="cored bold fs16">${ret.data[i].text}</p>
                        <p class="fs14">${ret.data[i].copy_text}</p>
                      </div>
                      <ul class="specialty-img clearfix">
                      ${htmls}
                      </ul>
                    </div>
                  </div>
                </div>`
              }
              if (page === 1) {
                specialty.innerHTML = html
              }else {
                specialty.innerHTML += html
              }
            } else if (type === "bbsc") {
              if (ret.data.length < pagesize) {
								state = false
							}
              for (var i = 0; i < ret.data.length; i++) {
                img_box[i] = [];
                var htmls = "";
                for (var j = 0; j < ret.data[i].img_list.length; j++) {
                  htmls += `<li onclick="openitem('${ret.data[i].img_list[j].type}',${ret.data[i].img_list[j].param},${i})"><img src="${ret.data[i].img_list[j].img_url}"></li>`
                  if (ret.data[i].img_list[j].type === "img") {
                    img_box[i].push(ret.data[i].img_list[j].img_url)
                  }
                }
                html += `<div class="mui-table-view">
                  <div class="mui-table-view-cell mui-media">
                      <img class="mui-media-object mui-pull-left" src="${ret.data[i].header_img}">
                      <div class="mui-media-body">
                        ${ret.data[i].nickname}
                        <p class='mui-ellipsis'>${ret.data[i].createtime}</p>
                      </div>
                      <span class="bgcr share"><i class="iconfont fs12">&#xe61f;</i>一键分享</span>
                  </div>
                  <div class="specialty-box">
                    <div class="specialty-boxi">
                      <div class="specialty-text">
                        <p class="fs14">${ret.data[i].copy_text}</p>
                      </div>
                      <ul class="specialty-img clearfix">
                        ${htmls}
                      </ul>
                    </div>
                  </div>
                </div>`
                img_box.push(img_box[i])
              }
              if (page === 1) {
                necessary.innerHTML = html
              }else {
                necessary.innerHTML += html
              }
            } else if (type === "jxdp") {
              if (ret.data.length < pagesize) {
								state = false
							}
              for (var i = 0; i < ret.data.length; i++) {
                img_box[i] = [];
                var htmls = "";
                for (var j = 0; j < ret.data[i].img_list.length; j++) {
                  htmls += `<li onclick="openitem('${ret.data[i].img_list[j].type}',${ret.data[i].img_list[j].param},${i})"><img src="${ret.data[i].img_list[j].img_url}"></li>`
                  if (ret.data[i].img_list[j].type === "img") {
                    img_box[i].push(ret.data[i].img_list[j].img_url)
                  }
                }
                html += `<div class="mui-table-view">
                  <div class="mui-table-view-cell mui-media">
                      <img class="mui-media-object mui-pull-left" src="${ret.data[i].header_img}">
                      <div class="mui-media-body">
                        ${ret.data[i].nickname}
                        <p class='mui-ellipsis'>${ret.data[i].createtime}</p>
                      </div>
                      <span class="bgcr share aui-btn" onclick="shareBtn(${ret.data[i].id})"><i class="iconfont fs12">&#xe61f;</i>${ret.data[i].share_num}</span>
                  </div>
                  <div class="specialty-box">
                    <div class="specialty-boxi">
                      <div class="specialty-text">
                        <p class="cored bold fs16">${ret.data[i].text}</p>
                        <p class="fs14">${ret.data[i].copy_text}</p>
                      </div>
                      <ul class="specialty-img clearfix">
                      ${htmls}
                      </ul>
                    </div>
                  </div>
                </div>`
              }
              if (page === 1) {
                commodity.innerHTML = html
              }else {
                commodity.innerHTML += html
              }
            } else if (type === "hwlj") {
              if (ret.data.length < pagesize) {
								state = false
							}
              for (var i = 0; i < ret.data.length; i++) {
                img_box[i] = [];
                var htmls = "";
                for (var j = 0; j < ret.data[i].img_list.length; j++) {
                  htmls += `<li onclick="openitem('${ret.data[i].img_list[j].type}',${ret.data[i].img_list[j].param},${i})"><img src="${ret.data[i].img_list[j].img_url}"></li>`
                  if (ret.data[i].img_list[j].type === "img") {
                    img_box[i].push(ret.data[i].img_list[j].img_url)
                  }
                }
                html += `  <div class="mui-table-view">
                    <div class="mui-table-view-cell mui-media">
                      <a href="javascript:;">
                        <img class="mui-media-object mui-pull-left" src="${ret.data[i].header_img}">
                        <div class="mui-media-body">
                          ${ret.data[i].nickname}
                          <p class='mui-ellipsis'>${ret.data[i].createtime}</p>
                        </div>
                        <span class="bgcr buy mr2v" onclick="openitems()">领券购买</span>
                        <span class="bgcr share aui-btn" onclick="shareBtn(${ret.data[i].id})"><i class="iconfont fs12">&#xe61f;</i>${ret.data[i].share_num}</span>
                      </a>
                    </div>
                    <div class="specialty-box">
                      <div class="specialty-boxi">
                        <div class="specialty-text">
                          <p class="cored bold fs16">${ret.data[i].text}</p>
                          <p class="fs14">${ret.data[i].copy_text}</p>
                        </div>
                        <ul class="specialty-img clearfix">
                            ${htmls}
                        </ul>
                        <div class="clearfix mt10b5">
                          <div class="password fl">${ret.data[i].copy_text}</div>
                          <div class="copy fr">复制评论</div>
                        </div>
                      </div>
                    </div>
                  </div>`
                html += `<div class="mui-table-view">
                  <div class="mui-table-view-cell mui-media">
                      <img class="mui-media-object mui-pull-left" src="${ret.data[i].header_img}">
                      <div class="mui-media-body">
                        ${ret.data[i].nickname}
                        <p class='mui-ellipsis'>${ret.data[i].createtime}</p>
                      </div>
                      <span class="bgcr share aui-btn" onclick="shareBtn(${ret.data[i].id})"><i class="iconfont fs12">&#xe61f;</i>${ret.data[i].share_num}</span>
                  </div>
                  <div class="specialty-box">
                    <div class="specialty-boxi">
                      <div class="specialty-text">
                        <p class="cored bold fs16">${ret.data[i].text}</p>
                        <p class="fs14">${ret.data[i].copy_text}</p>
                      </div>
                      <ul class="specialty-img clearfix">
                      ${htmls}
                      </ul>
                    </div>
                  </div>
                </div>`
              }
              if (page === 1) {
                selected.innerHTML = html
              }else {
                selected.innerHTML += html
              }
            }
         })
       }
       //加载
       var loading = function(){
         if (state){
           page++
           getData()
         }
       }
       //关闭图片
       function closePhoto() {
         var photoBrowser = api.require('photoBrowser');
         photoBrowser.close()
         api.sendEvent({
             name: 'PhotoState',
             extra: {
                 state: '0',
             }
         });
       }
  </script>
  </html>
