<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <title>其他外部商城</title>
      <link rel="stylesheet" type="text/css" href="../../../css/api.css"/>
      <link rel="stylesheet" type="text/css" href="../../../css/iconfont.css"/>
      <link rel="stylesheet" type="text/css" href="../../../css/public.css"/>
      <style>
          .header{
            height: 40px;
            line-height: 40px;
          }
      </style>
  </head>
  <body>
    </style>
    </head>
    <body>
    <!-- 头部 -->
    <div id="header" class="clearfix bgcf header bold">
    <span onclick="closewin()" class=" fl ml3v">
      <i class="iconfont mr2v">&#xe601;</i>天猫超市
    </span>
      <i onclick="openload()" class="iconfont fr mr4v fs20">&#xe61e;</i>
    </div>
  </body>
  <script type="text/javascript" src="../../../script/api.js"></script>
  <script type="text/javascript">
      var headerH;
      apiready = function(){
        var header = $api.byId('header');
        $api.fixStatusBar(header);
        headerH = $api.offset(header).h;
        api.openFrame({
            name: 'other_shop',
            url: 'https://chaoshi.tmall.com/',
            rect: {
                x: 0,
                y: headerH,
                w: 'auto',
                h: 'auto'
            },
            pageParam: {
                name: 'test'
            },
            bounces: false
        });
        exitBack()
      };
      //关闭
      function closewin() {
        api.closeWin();
      }
      //刷新
      function openload() {
        api.openFrame({
            name: 'other_shop',
            url: 'https://chaoshi.tmall.com/',
            rect: {
                x: 0,
                y: headerH,
                w: 'auto',
                h: 'auto'
            },
            pageParam: {
                name: 'test'
            },
            reload: true,
            bounces: false
        });
      }
      //点击返回按钮
      function exitBack() {
        api.addEventListener({
            name: 'keyback'
        }, function(ret, err){
            if( ret ){
              api.historyBack({
                  frameName: 'other_shop'
              }, function(ret, err) {
                  if (!ret.status) {
                      api.closeWin();
                  }
              });
            }
        });

      }
  </script>
  </html>
