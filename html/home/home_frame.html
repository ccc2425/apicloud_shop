<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <title>title</title>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <!-- <link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/> -->
      <link rel="stylesheet" type="text/css" href="../../css/aui-slide.css" />
      <link rel="stylesheet" type="text/css" href="../../css/swiper.min.css" />
      <link rel="stylesheet" type="text/css" href="../../css/aui-pull-refresh.css" />
      <link rel="stylesheet" type="text/css" href="../../css/public.css"/>
      <style>
      h1, h2, h3, h4, h5, h6{
        margin-top: 0;
      }
        .bgbanner{
          position: fixed;
          /*top: -50px;*/
          width: 100%;
          height: 120px;
          background: url(../../image/banbg1.png);
          background-repeat: no-repeat;
          background-size: 100% 100%;
        }
        html,body{
          background: #fff;;
        }
        /*banner图*/
        .swiper-wrapper{
          /*width: 96vw;*/
          height: 160px;
          margin: auto;
        }
        .swiper-wrapper .swiper-slide{
          padding: 0 2vw;
          box-sizing: border-box;
          /*width: 100%!important;*/
        }
          .classfial-list{
            width: 100%;
            font-size: 12px;
          }
          .classfial-list li{
            float: left;
            width: 20%;
            text-align: center;
          }
          .classfial-list li img{
            display: block;
            width: 64%;
            border-radius: 50%;
            margin: 5px auto;
          }
          .classfial-list li span{
            line-height: 15px;
          }
          .home-banner{
            /*width: 80vw;
            padding: 0 10vw*/
          }
          /*分类*/
          /*广告banner*/
          #sliderad img{
            height: 80px;
            width: 80%;
            margin: 20px 10% 5px;
          }
          /*头条*/
          .headlines{
            padding: 0 3vw;
            font-size: 12px;
            /*margin: 10px auto;*/
            padding-top: 10px;
            padding-bottom: 10px;
          }
          .headlines-text{
            margin-right: 3vw;
          }
          #mooc {
           width: 100%;
           text-align: left;
           line-height: 18px;
           padding-bottom: 10px;
           border-bottom: 1px solid #eee;
          }
          /* 中间样式 */
          #moocBox {
           height: 21px;
           overflow: hidden; /* 这个一定要加，超出的内容部分要隐藏，免得撑高中间部分 */
          }
          #mooc ul li {
           height: 21px;
           line-height: 21px;
          }
          #mooc ul li span {
           /*float: left;;*/
           color: #999;
          }
          /*活动*/
          .activenews{
            padding: 5px 2%;
          }
          .earlypunch{
            width: 100%;
            height: 100px;
          }
          .actcoupon{
            display: flex;
            flex-direction: row;
          }
          .actcoupon>div{
            /*display: inline-block;*/
            width: 48vw;
            height: calc(24vw - 2.5px);
          }
          .actcoupon>div:first-child{
            width: 48vw;
            height: 48vw;
          }
          .actcoupon>div>div{
            width: 100%;
            height: calc(24vw - 2.5px);
          }
          .activelist{
            display: flex;
            flex-direction: row;
          }
          .activelist div{
            flex: 1;
            height: 110px;
            margin-right: 2vw;
            border-radius: 8px;
            overflow: hidden;
          }
          .activelist div:last-child{
            margin-right: 0;
          }
          /*优选专场*/
          .tit-img-box{
            width: 100%;
            height: 100%;
            margin: 0 auto 10px;
          }
          .tit-img{
            width: 20%;
            height: 36px;
          }
          .tit2{
            font-size: 12px;
            color: #ccc;
          }
          .yxzc{
            display: flex;
            flex-direction: row;
          	background: #fff;
          }
          .yxzc div{
            flex: 1;
            height: 170;
            margin-right: 2vw;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
          }
          .yxzc div:last-child{
            margin-right: 0;
          }
          .optimization-box div{
            float: left;
            width: 47vw;
            height: 96px;
            margin-top: 3px;
            margin-bottom: 3px;
          }
          .optimization-box div:nth-child(2n-1){
            margin-right: 2vw;
          }
          /*美妆*/
          .beauty{
            width: 96vw;
            height: 100px;
            padding: 0 2vw;
          }
          .beauty-list{
            width: 100%;
            height: 160px;
            box-sizing: border-box;
            padding: 10px 0 10px 2vw;
            overflow-x: scroll;
            overflow-y: hidden;
            white-space: nowrap;
          }
          .beauty-list::-webkit-scrollbar {
            display:none
          }
          .beauty-list-box{
            display: inline-block;
            width: 30vw;
            height: 100%;
            margin-right: 2vw;
          }
          .beauty-list-img{
            width: 100%;
            height: 70%;
          }
          .beauty-list-price span:first-child{
            background: red;
            color: #fff;
            font-size: 10px;
            padding: 0 5px;
            height: 16px;
            line-height: 16px;
            margin-right: 1vw;
            border-radius: 3px;
          }
          .beauty-list-price span:last-child{
            color: red;
            font-size: 12px;
            height: 18px;
            line-height: 18px;
          }
          /*精选好券*/
          .vouchers-list{
            margin-bottom: 10px;
          }
          .vouchers-tit{
            border-bottom: 1px solid #ccc;
          }
          .titimg{
            width: 5vw;
            height: 5vw;
            margin-bottom: 5px;
          }
          .vouchers-list{
            width: 100vw;
            padding: 1vh 2vw;
            background-color: #fff;
            box-sizing: border-box;
          }
          .vouchers-list:last-child{
            margin-bottom: 0;
          }
          .vouchers-list-left{
            float: left;
            position: relative;
            width: 32vw;
            height: 120px;
            margin-right: 3vw;
          }
          .peoplenum{
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            color: #fff;
            background: linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.5),rgba(0,0,0,.3));
          }
          .vouchers-list-right{
            float: left;
            width: 61vw;
            padding: 10px 0;
          }
          .vouchers-list1{
            width: 100%;
            font-size: 16px;
            line-height: 4vw;
          }
          .vouchers-list1 img{
            width: 4vw;
            height: 4vw;
            margin-right: 2vw;
            vertical-align: top;
          }
          .vouchers-list2{
            font-size: 13px;
            color: #ccc;
          }
          .vouchers-list3{
            font-size: 12px;
          }
          .original{
            color: #ccc;
            text-decoration: line-through;
          }
          .coupon{
            /*background-color: red;*/
            background: url(../../image/bg4.png) no-repeat;
            background-size: 100% 100%;
            color: #fff;
            line-height: 18px;
            padding: 0 2vw;
          }
          .vouchers-list4 span{
            color: #fff;
            padding: 0 2vw;
            line-height: 18px;
            font-size: 10px;
            border-radius: 3px;
            padding-top: 3px;
          }
          .vouchers-list4 span:first-child{
            background: linear-gradient(to right,#FF4D4D,#F3C148);
          }
          .vouchers-list4 span:last-child{
            background: linear-gradient(to right,#735CFF,#FF00CC);
          }
          /**/
          .bottom-line-img{
            display: inline-block;
            width: 3vw;
            height: 3vw;
          }
          .mui-slider-item>a{
            width: 95%;
            margin: auto;
          }
          /*头条*/
          .headlines-text{
            width: 20vw;
            height: 18px;
            /*height: */
          }
          .aui-slide-page-dot{
            width: 16px;
            border-radius: 16px;
            height: 2px;
            background: #E6E6E6;
          }
          .aui-slide-page-wrap{
            bottom: -6px;
          }
          .aui-slide-page-active{
            background: #AFAFAF;
          }
          .swiper-pagination-bullet-active{
            background: #fff;
          }
          .beauty-list-tit{
            margin-bottom: 5px;
          }
          #demo li>div{
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
          }
          .discount{
            font-family: inherit;
          }
      </style>
  </head>
  <body>
    <div id="banbg" class="bgbanner"></div>
    <section class="aui-refresh-content">
        <!-- 轮播图 -->
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <!-- <div class="swiper-slide"><img src="../../image/ban1.png"></div> -->
          </div>
          <!-- 分页器 -->
          <div class="swiper-pagination"></div>
        </div>
        <!-- 分类轮播 -->
        <div class="pr bgcf">
          <div id="aui-slide2">
              <div class="aui-slide-wrap" >
                  <!-- <div class="aui-slide-node aui-slide-node-middle aui-slide-node-center">
                    <ul class="classfial-list clearfix">
                          <li onclick="openmall(0)"><img src="../../image/a1.png" alt=""><span>淘宝</span></li>
                    </ul>
                  </div> -->
              </div>
              <div class="aui-slide-page-wrap"><!--分页容器--></div>
          </div>
        </div>
        <!-- 广告轮播图 -->
        <div id="aui-slide3">
            <div class="aui-slide-wrap" >
                <!-- <div onclick="openactive(0)" class="aui-slide-node bg-dark">
                    <img src="../../image/l1.png" />
                </div> -->
            </div>
            <div class="aui-slide-page-wrap no"><!--分页容器--></div>
        </div>
        <!-- 头条 -->
        <div class="headlines clearfix bgcf">
          <div class="headlines-text fl">
              <img id="headlines_img" src="" alt="">
          </div>
          <div id="mooc" class="">
            <div id="moocBox">
             <ul>
              <!-- <li><span class="cored bold">严**</span>2秒前获取佣金<span class="cored bold">30.34</span>元</li> -->
             </ul>
            </div>
          </div>
        </div>
        <!-- 活动 -->
        <div class="activenews bgcf">
          <div onclick="openGetup()" class="earlypunch boradius mb5">
              <img src="" alt="" class="s_list_box">
          </div>
          <div class="actcoupon mb5 clearfix">
              <div onclick="living()" class="mr2v boradius">
                <img src="" alt="" class="d_list_box">
              </div>
              <div>
                <div onclick="openzero()" class="mb5 boradius">
                  <img src="" alt="" class="d_list_box">
                </div>
                <div class="boradius">
                  <img src="" alt="" class="d_list_box">
                </div>
              </div>
          </div>
          <div class="activelist">
            <div onclick="openDryingList()"><img src="" class="f_list_box"></div>
            <div onclick="openLaxin()"><img src="" class="f_list_box"></div>
            <div onclick="openSignIn()"><img src="" class="f_list_box"></div>
            <div onclick="openRedBag()"><img src="" class="f_list_box"></div>
          </div>
        </div>
        <!-- 优选专场 -->
        <div class="optimization pad5a2b bgcf">
              <h4 class="optimization-tit text-center">
                <div class="tit-img-box">
                  <img class="h_list_box" src="" alt="">
                </div>
    						<!-- <img class="tit-img" src="../public/img/index/icon1.png" />
    						<span>优选专场</br><span class="tit2">热门活动,发现更多好货</span></span>
    						<img class="tit-img" src="../public/img/index/icon1.png" /> -->
    					</h4>
    					<div class="yxzc mb5">
    						<div onclick="openBeauty()">
                  <img class="t_list_box" src="" />
                </div>
                <div onclick="openBeauty()">
    						<!-- <div onclick="openMaterKid()"> -->
                  <img class="t_list_box" src="" />
                </div>
                <div onclick="openBeauty()">
    						<!-- <div onclick="openLife()"> -->
                  <img class="t_list_box" src="" />
                </div>
    					</div>
              <div class="optimization-box clearfix mb5">
                <div onclick="openAdults()">
                  <img class="f_d_list_box" src="../../image/c4.png" />
                </div>
                <!-- <div>
                  <img src="../../image/c4.png" />
                </div> -->
                <div onclick="openSpecialty()">
                  <img class="f_d_list_box" src="../../image/c5.png" />
                </div>
                <div onclick="openRob()">
                  <img class="f_d_list_box" src="../../image/c6.png" />
                </div>
                <div onclick="openSelected()">
                  <img class="f_d_list_box" src="../../image/c7.png">
                </div>
              </div>
        </div>
        <div class="hot-field bgcf">
          <h4 class="optimization-tit text-center">
            <div class="tit-img-box">
              <img class="h_list_box" src="" alt="">
            </div>
            <!-- <img class="tit-img" src="../public/img/index/icon1.png" />
            <span>优选专场</br><span class="tit2">热门活动,发现更多好货</span></span>
            <img class="tit-img" src="../public/img/index/icon1.png" /> -->
          </h4>
          <div onclick="actSpecial()" class="beauty">
            <img class="s_list_box" src="../../image/d1.png" />
          </div>
          <div class="beauty-list">
            <!-- <div onclick="openitem()" class="beauty-list-box">
              <div class="beauty-list-img">
                <img src="../../image/la1.png" />
              </div>
              <div class="beauty-list-tit texthidden">纯棉化妆棉洁面膜卸妆棉上妆粉扑补水双效洗脸棉片</div>
              <div class="beauty-list-price text-center"><span>券后价</span><span>$9.9</span></div>
            </div> -->
          </div>
          <div onclick="actSpecial()" class="beauty">
            <img class="s_list_box" src="../../image/d2.png" />
          </div>
          <div class="beauty-list">
            <!-- <div onclick="openitem()" class="beauty-list-box">
              <div class="beauty-list-img">
                <img src="../../image/la2.png" />
              </div>
              <div class="beauty-list-tit texthidden">纯棉化妆棉洁面膜卸妆棉上妆粉扑补水双效洗脸棉片</div>
              <div class="beauty-list-price text-center"><span>券后价</span><span>$9.9</span></div>
            </div> -->
          </div>
        </div>
        <!-- 精选好券 -->
        <!--下拉刷新容器-->
        <!-- <section class="aui-refresh-content"> -->
        <div class="aui-content">
          <div id="loading" class="vouchers bgcf">
            <h4 class="optimization-tit text-center">
              <div class="tit-img-box">
                <img class="h_list_box" src="" alt="">
              </div>
              <!-- <img class="tit-img" src="../public/img/index/icon1.png" />
              <span>优选专场</br><span class="tit2">热门活动,发现更多好货</span></span>
              <img class="tit-img" src="../public/img/index/icon1.png" /> -->
            </h4>
            <!-- <h4 class="vouchers-tit text-center">
              <img class="tit-img" src="../public/img/index/icon1.png" />
              <span><img class="titimg" src="../public/img/index/icon1.png"></br>今日精选好券</br><span class="tit2">EXPLOSION UPDATE TODAY</span></span>
              <img class="tit-img" src="../public/img/index/icon1.png" />
            </h4> -->
            <!--数据列表-->
            <ul id="demo" class="bgcf vouchersul">
              <!-- <li onclick="openitem()" class="vouchers-list clearfix aui-card-list">
                <div class="clearfix">
                <div class="vouchers-list-left">
                  <img src="../../image/la3.png" alt="">
                  <div class="peoplenum text-center">248人已抢</div>
                </div>
                <div class="vouchers-list-right">
                  <div class="vouchers-list1 texthidden mb5">
                    <img src="../../image/taobao.jpg">
                    时尚新款单肩背大人小孩通用零钱包
                  </div>
                  <div class="vouchers-list2 texthidden mb50">[联名同款时尚潮包],大人小孩通用零用钱包,2019新款,可爱宝宝单肩圆筒包,时尚卡通,女童斜挎零钱包,引领</div>
                  <div class="vouchers-list3 cored clearfix">
                    $<span class="discount mr1v cored fs18">9.9</span>
                    <span class="original">$11.9</span>
                    <span class="coupon fr mr3v">2元券</span>
                  </div>
                  <div class="vouchers-list4"><span class="mr2v">自购赚$1.19</span><span>升级赚1.16</span></div>
                </div>
                </div>
              </li> -->
            </ul>
            <div class="bottom-line text-center">
              <div class="bottom-line-img">
                <img src="../../image/loading_more.gif">
              </div>
              正在加载中......
            </div>
          </div>
        </div>
    </section>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <!-- <script type="text/javascript" src="../../script/mui.min.js"></script> -->
  <script type="text/javascript" src="../../script/aui-slide.js"></script>
  <!-- <script type="text/javascript" src="../../script/aui-pull-refresh.js"></script> -->
  <script type="text/javascript" src="../../script/aui-scroll.js" ></script>
  <script type="text/javascript" src="../../script/zepto.js"></script>
  <script type="text/javascript" src="../../script/md5.js"></script>
  <script type="text/javascript" src="../../script/ajax.js"></script>
  <script type="text/javascript" src="../../script/swiper.min.js"></script>
  <script type="text/javascript">
    var id1 = 0;
    var id2 = 0;
    var pagesize = 8,
      page = 1,
      state = true;
      types = 'all_asc';
    var auiRefreshContent = document.getElementsByClassName('aui-refresh-content');
    var s_list_box = document.getElementsByClassName('s_list_box');
    var d_list_box = document.getElementsByClassName('d_list_box');
    var f_list_box = document.getElementsByClassName('f_list_box');
    var t_list_box = document.getElementsByClassName('t_list_box');
    var h_list_box  = document.getElementsByClassName('h_list_box');
    var f_d_list_box = document.getElementsByClassName('f_d_list_box');
    var beautyList = document.getElementsByClassName('beauty-list');
    var bottom_list = document.getElementById('demo');
    //监听滑动
    var scroll = new auiScroll({
        listen:true,
        distance:200 //判断到达底部的距离，isToBottom为true
    },function(ret){
      var scrollTop = ret.scrollTop;
      var shopH = 160;
      if (scrollTop>shopH) {
        api.sendEvent({
            name: 'stopBanner',
            extra: {
                key1: 'stop',
            }
        });
      }else {
        api.sendEvent({
            name: 'stopBanner',
            extra: {
                key1: 'start',
            }
        });
      }
    });
      apiready = function(){
        var banbg = $api.byId('banbg');
        var headlines_img = $api.byId('headlines_img');
        axios({
          url: '/api/rmhome/home',
          data:{
            token:$api.getStorage('token'),
          }
        },function(ret,err){
            // console.log(JSON.stringify(ret));
            // var html = "";
            var auiSlideWrap = document.getElementsByClassName('aui-slide-wrap')
            for (var i = 0; i < ret.data.length; i++) {
              var _data = ret.data[i];
              switch (_data.module_type) {
                case 'banner':
                  var html = "";
                  var swiperWrapper = document.getElementsByClassName('swiper-wrapper')
                  for (var j = 0; j < _data.data.length; j++) {
                    html +=`<div class="swiper-slide"><img src="${_data.data[j].image}"></div>`
                    // swiperWrapper +=`<div onclick="openHref(${_data.data[j].jump_param})" class="swiper-slide"><img src="${_data.data[j].image}"></div>`
                  }
                  swiperWrapper[0].innerHTML = html;
                  //轮播
                  var swiper = new Swiper('.swiper-container', {
                    spaceBetween: 30,
                    centeredSlides: true,
                    autoplay: {
                       delay: 3000,
                       disableOnInteraction: false,
                     },
                     pagination: {
                       el: '.swiper-pagination',
                     },
                     on: {
                       slideChangeTransitionStart: function () {
                         var slider = this;
                         // console.log(slider);
                         api.addEventListener({
                             name: 'stopBanner'
                         }, function(ret, err){
                           // console.log(ret.value.key1);
                             if( ret ){
                               if (ret.value.key1 === "stop") {
                                 slider.autoplay.stop()
                               }else {
                                 slider.autoplay.start()
                               }
                             }
                         });

                           var bIndex = slider.activeIndex
                           // console.log(bIndex);
                           api.sendEvent({
                               name: 'banner',
                               extra: {
                                   key1: bIndex,
                               }
                           });
                       }
                       // , slideChangeTransitionEnd: function () {
                       //   var slider = this;
                       //   if (slider.activeIndex === 1) {
                       //     menuButton.addEventListener('click', openMenu, true);
                       //   }
                       // },
                     }
                   });
                  break;
                case 'btn':
                  var html = "";
                  var c;
                  var d = _data.data.length%10;
                  if (d!==0) {
                    c =( _data.data.length - d)/10;
                    c=c+1
                  }
                  for (var j = 0; j < c; j++) {
                    var htmls = "";
                    for (var k = 0; k < 10; k++) {
                      var f = j*10+k;
                      if (f===_data.data.length) {
                        break
                      }
                        htmls +=`<li onclick="openmall(0)"><img src="${_data.data[f].image}"><span>${_data.data[f].title}</span></li>`
                    }
                    html += `<div class="aui-slide-node aui-slide-node-middle aui-slide-node-center">
                      <ul class="classfial-list clearfix">
                      ${htmls}
                      </ul>
                    </div>`
                  }
                  auiSlideWrap[0].innerHTML = html
                  // 分类轮播
                  var slide2 = new auiSlide({
                      container:document.getElementById("aui-slide2"),
                      // "width":300,
                      "height":180,
                      "speed":300,
                      "autoPlay": 0, //自动播放
                      "pageShow":true,
                      "loop":false,
                      "pageStyle":'dot',
                      'dotPosition':'center'
                  })
                  break;
                case 'center_banner':
                    var html = "";
                    for (var j = 0; j < _data.data.length; j++) {
                      html +=`<div onclick="openactive(0)" class="aui-slide-node bg-dark">
                          <img src="${_data.data[j].image}" />
                      </div>`;
                    }
                    auiSlideWrap[1].innerHTML = html;
                  break;
                case 'roll_msg':
                    headlines_img.src = _data.data.image;
                    var moocUl = document.querySelectorAll('#moocBox ul');
                    var html = "";
                    for (var j = 0; j < _data.data.msg.length; j++) {
                      html +=`<li>${_data.data.msg[j]}</li>`
                    }
                    moocUl[0].innerHTML = html;
                    // console.log("roll_msg");
                  break;
                case 'one_banner':
                    if (_data.module_tag ==="one_banner_0") {
                      s_list_box[0].src = _data.data.image;
                    } else if (_data.module_tag ==="one_banner_1") {
                      s_list_box[1].src = _data.data.image;
                    }else if (_data.module_tag ==="one_banner_2") {
                      s_list_box[1].src = _data.data.image;
                      s_list_box[2].src = _data.data.image;
                    }
                    // console.log("one_banner");
                  break;
                case 'thr_m1_btn':
                  for (var j = 0; j < _data.data.length; j++) {
                    d_list_box[j].src =  _data.data[j].image;
                  }
                  break;
                case 'four_btn':
                  for (var j = 0; j < _data.data.length; j++) {
                    f_list_box[j].src =  _data.data[j].image;
                  }
                  break;
                case 'thr_m2_btn':
                  for (var j = 0; j < _data.data.length; j++) {
                    t_list_box[j].src =  _data.data[j].image;
                  }
                  break;
                case 'delimiter':
                    if (_data.module_tag ==="delimiter_0") {
                      h_list_box[0].src = _data.data.image;
                    } else if (_data.module_tag ==="delimiter_1") {
                      h_list_box[1].src = _data.data.image;
                      h_list_box[2].src = _data.data.image;
                    }
                    // else if (_data.module_tag ==="delimiter_2") {
                    //   h_list_box[2].src = _data.data.image;
                    // }
                  break;
                case 'two_btn':
                    if (_data.module_tag ==="two_btn_0") {
                      f_d_list_box[0].src = _data.data[0].image;
                      f_d_list_box[1].src = _data.data[1].image;
                    } else if (_data.module_tag ==="two_btn_1") {
                      f_d_list_box[2].src = _data.data[0].image;
                      f_d_list_box[3].src = _data.data[1].image;
                    }
                  break;
                case 'infeed_item':
                    if (_data.module_tag ==="infeed_item_0") {
                      var html = "";
                      for (var j = 0; j < _data.data.length; j++) {
                        html += `<div onclick="openitem(${_data.data[j].item_id})" class="beauty-list-box">
                          <div class="beauty-list-img">
                            <img src="${_data.data[j].master_image}" />
                          </div>
                          <div class="beauty-list-tit texthidden">${_data.data[j].title}</div>
                          <div class="beauty-list-price text-center"><span>券后价</span><span>￥${_data.data[j].end_price}</span></div>
                        </div>`
                      }
                      beautyList[0].innerHTML = html;
                    } else if (_data.module_tag ==="infeed_item_1") {
                      var html ="";
                      for (var j = 0; j < _data.data.length; j++) {
                        html +=`<div onclick="openitem(${_data.data[j].item_id})" class="beauty-list-box">
                          <div class="beauty-list-img">
                            <img src="${_data.data[j].master_image}" />
                          </div>
                          <div class="beauty-list-tit texthidden">${_data.data[j].title}</div>
                          <div class="beauty-list-price text-center"><span>券后价</span><span>￥${_data.data[j].end_price}</span></div>
                        </div>`
                      }
                      beautyList[1].innerHTML = html;
                    }
                  break;
                case 'bottom_item':
                    var html = "";
                    for (var j = 0; j < _data.data.length; j++) {
                      html += `<li onclick="openitem(${_data.data[j].item_id})" class="vouchers-list clearfix aui-card-list">
                        <div class="clearfix">
                        <div class="vouchers-list-left">
                          <img src="${_data.data[j].master_image}" alt="">
                          <div class="peoplenum text-center">${_data.data[j].sales}人已抢</div>
                        </div>
                        <div class="vouchers-list-right">
                          <div class="vouchers-list1 texthidden mb5">
                            <img src="../../image/taobao.jpg">
                            ${_data.data[j].title}
                          </div>
                          <div class="vouchers-list2 texthidden mb50">${_data.data[j].recommend_msg}</div>
                          <div class="vouchers-list3 cored clearfix">
                            ￥<span class="discount mr1v cored fs18">${_data.data[j].end_price}</span>
                            <span class="original">￥ ${_data.data[j].old_price}</span>
                            <span class="coupon fr mr3v">${_data.data[j].coupon_price}元券</span>
                          </div>
                        </div>
                        </div>
                      </li>`
                      // <div class="vouchers-list4"><span class="mr2v">自购赚$1.19</span><span>升级赚1.16</span></div>
                    }
                    bottom_list.innerHTML = html;
                  break;
                default:
              }
            }
        })

        //监听轮播变化
        api.addEventListener({
            name: 'banner'
        }, function(ret, err){
            if( ret ){
                var bIndex = ret.value.key1;
                switch (bIndex) {
                  case 0:
                    banbg.style.background = 'url(../../image/banbg1.png)'
                    break;
                  case 1:
                    banbg.style.background = 'url(../../image/banbg2.png)'
                    break;
                  case 2:
                    banbg.style.background = 'url(../../image/banbg1.png)'
                    break;
                  case 3:
                    banbg.style.background = 'url(../../image/banbg2.png)'
                    break;
                  default:

                }
                // console.log(header.style.background);
                // alert(ret.value.key1)
            }else{

            }
        });
        api.addEventListener({
            name:'scrolltobottom',
            extra:{
                threshold: -1            //设置距离底部多少距离时触发，默认值为0，数字类型
            }
        }, function(ret, err){
          loading()
        });
        //下拉刷新
        api.setRefreshHeaderInfo({
              visible: true,
              loadingImg: '../../image/loading_more.gif',
              bgColor: '#ccc',
              textColor: '#fff',
              textDown: '下拉刷新...',
              textUp: '松开刷新...',
              showTime: true //显示更新时间
          }, function(ret, err) {
            // api.refreshHeaderLoadDone()
            setTimeout(function(){
              api.refreshHeaderLoadDone();
              page = 1;
              state = true;
              window.location.reload()
              // opendata()
            },1000)
              //在这里从服务器加载数据，加载完成后调用api.refreshHeaderLoadDone()方法恢复组件到默认状态
        });
      };
      // 广告轮播
      var slide3 = new auiSlide({
          container:document.getElementById("aui-slide3"),
          // "width":300,
          "height":120,
          "speed":100,
          "autoPlay": 0, //自动播放
          "loop":true,
          "pageShow":true,
          "pageStyle":'line',
          'dotPosition':'center',
      })
    //纵向滚动 需要设置div的高度
      var area = document.getElementById('moocBox');
      var iliHeight = 21;//单行滚动的高度
      var speed = 50;//滚动的速度
      var time;
      var delay= 1000;
      area.scrollTop=0;
      area.innerHTML+=area.innerHTML;//克隆一份一样的内容
      function startScroll(){
       time=setInterval("scrollUp()",speed);
       area.scrollTop++;
       }
      function scrollUp(){
       if(area.scrollTop % iliHeight==0){
        clearInterval(time);
        setTimeout(startScroll,delay);
        }else{
         area.scrollTop++;
         if(area.scrollTop >= area.scrollHeight/2){
          area.scrollTop =0;
          }
         }
       }
       setTimeout(startScroll,delay)

//打开其他页面
  // 打开分类商城页面
  function openmall() {
    api.openWin({
        name: 'malllist',
        url: './malllist.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  // 打开活动页面
  function openactive(index) {
      api.openWin({
          // name: 'active'+index,
          // url: './active' + index + '.html',
          name: 'active0',
          url: './active0.html',
          pageParam: {
              name: 'test'
          }
      });
  }
  //打开活动专场页面
  function actSpecial() {
    api.openWin({
        name: 'actSpecial',
        url: './actSpecial.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  // 打开商品页面
  function openitem(item_id) {
    api.openWin({
        name: 'item',
        url: './item.html',
        pageParam: {
            item_id: item_id
        }
    });
  }
  //早起挑战
  function openGetup() {
    api.openWin({
        name: 'upearly',
        url: './upearly.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //生活券
  function living() {
    api.openWin({
        name: 'lifestamps',
        url: './lifestamps.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //0元购
  function openzero() {
    api.openWin({
        name: 'zerobuy',
        url: './zerobuy.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //晒单
  function openDryingList() {
    api.openWin({
        name: 'dryingList',
        url: './dryingList.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //拉新
  function openLaxin() {
    api.openWin({
        name: 'laxin',
        url: './laxin.html',
        pageParam: {
            name: 'test'
        }
    });

  }
  //红包
  function openRedBag() {
    api.openWin({
        name: 'redEnvelope',
        url: './redEnvelope.html',
        pageParam: {
            name: 'test'
        }
    });

  }
  //精选单品
  function openSelected() {
    api.openWin({
        name: 'selected',
        url: './selected.html',
        pageParam: {
            name: 'test'
        }
    });

  }
  //疯抢
  function openRob() {
    api.openWin({
        name: 'rob',
        url: './rob.html',
        pageParam: {
            name: 'test'
        }
    });

  }
  //好货专场
  function openSpecialty() {
    api.openWin({
        name: 'specialty',
        url: './specialty.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //视频导购
  function openBuyVideo() {
    api.openWin({
        name: 'buyvideo',
        url: './buyvideo.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //达人说
  function openAdults() {
    api.openWin({
        name: 'adults',
        url: './adults.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //美妆
  function openBeauty() {
    api.openWin({
        name: 'beadty',
        url: './beadty.html',
        pageParam: {
            name: 'test'
        }
    });

  }
  //母婴
  function openMaterKid() {
      api.openWin({
          name: 'materkid',
          url: './materkid.html',
          pageParam: {
              name: 'test'
          }
      });

  }
  //生活
  function openLife() {
    api.openWin({
        name: 'life',
        url: './life.html',
        pageParam: {
            name: 'test'
        }
    });
  }
  //签到
  function openSignIn() {
    // api.openFrame({
    //     name: 'signIn',
    //     url: '../public/signIn.html',
    //     rect: {
    //         x: 0,
    //         y: 0,
    //         w: 'auto',
    //         h: 'auto'
    //     },
    //     pageParam: {
    //         name: 'test'
    //     },
    //     bounces: false,
    // });

    api.openWin({
        name: 'signIn',
        url: '../public/signIn.html',
        pageParam: {
            name: 'test'
        }
    });
  }

  //刷新请求
  //数据请求
  var opendata = function () {
    axios({
      url: '/api/rmitems/lists',
      data:{
        token:$api.getStorage('token'),
        screenw:frameWidth,
        screenh:frameHeight,
        cid:id1,
        scid:id2,
        sort:types,
        page:page,
        pagesize:pagesize
      }
    },function(ret){
      // console.log(JSON.stringify(ret));
      var html = "";
      if (ret.data.length < pagesize) {
        state = false
        // $api.dom('.quanbuxians').style.display = 'block'
      }
      for (var i = 0; i < ret.data.length; i++) {
        var type = ret.data[i].item_type;
        // console.log(type);
        html += `<li onclick="openitem(${ret.data[i].item_id})" class="vouchers-list clearfix aui-card-list">
          <div class="clearfix">
          <div class="vouchers-list-left">
            <img src="${ret.data[i].master_image}" alt="">
            <div class="peoplenum text-center">${ret.data[i].sales}人已抢</div>
          </div>
          <div class="vouchers-list-right">
            <div class="vouchers-list1 texthidden mb5">
              <img src="../../image/taobao.jpg">
              ${ret.data[i].title}
            </div>
            <div class="vouchers-list2 texthidden mb50">${ret.data[i].recommend_msg}</div>
            <div class="vouchers-list3 cored clearfix">
              ￥<span class="discount mr1v cored fs18">${ret.data[i].end_price}</span>
              <span class="original">￥ ${ret.data[i].old_price}</span>
              <span class="coupon fr mr3v">${ret.data[i].coupon_price}元券</span>
            </div>
          </div>
          </div>
        </li>`
      }
      bottom_list.innerHTML += html
      api.refreshHeaderLoadDone();
    })
  }
  var loading = function(){
    if (state){
      page++
      opendata()
    }
  }
  </script>
  </html>
